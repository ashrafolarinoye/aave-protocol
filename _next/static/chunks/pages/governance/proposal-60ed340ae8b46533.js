(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[668],{114:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(59499),o=r(4730),c=r(50029),a=r(87794),s=r.n(a),u=r(11163),i=r(67294),p=r(45881),f=r(77715),l=r(17667),b=r(19201),h=r(3483),O=r(67668),y=r(45626),d=r(8491),w=r(85893),v=["values"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(){var e=(0,u.useRouter)(),t=Number(e.query.proposalId),r=(0,i.useState)(),n=r[0],a=r[1],p=(0,i.useState)(),f=p[0],l=p[1],j=(0,i.useState)(!1),x=j[0],P=j[1];function k(){return k=(0,c.Z)(s().mark((function e(r){var n,c,u,i,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.M.getProposal({proposalId:t});case 2:return n=e.sent,n.values,c=(0,o.Z)(n,v),e.next=7,(0,b.r)(c);case 7:return u=e.sent,a(u),e.prev=9,e.next=12,(0,h.m)(u.ipfsHash,r);case 12:i=e.sent,p=g({id:t,originalHash:u.ipfsHash},i),l(p),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),P(!0);case 20:case"end":return e.stop()}}),e,null,[[9,17]])}))),k.apply(this,arguments)}return(0,i.useEffect)((function(){t&&function(e){k.apply(this,arguments)}(y.d.ipfsGateway)}),[t]),(0,w.jsx)(d.default,{ipfs:f,proposal:n,metadataError:x})}x.getLayout=function(e){return(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(f.C,{}),e,(0,w.jsx)(p.m,{})]})}},3483:function(e,t,r){"use strict";r.d(t,{m:function(){return w}});var n=r(59499),o=r(50029),c=r(87794),a=r.n(c),s=r(56371),u=r(9675),i=r.n(u),p=r(63144),f=r.n(p),l=r(45626),b=r(48764).Buffer;function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y={};function d(e,t){return"".concat(t,"/").concat(e)}function w(e,t){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t,r);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),console.groupCollapsed("Fetching proposal metadata from IPFS..."),console.info("failed with",r),r!==l.d.ipfsGateway){e.next=15;break}return console.info("retrying with",l.d.fallbackIpfsGateway),console.error(e.t0),console.groupEnd(),e.abrupt("return",w(t,l.d.fallbackIpfsGateway));case 15:throw console.info("exiting"),console.error(e.t0),console.groupEnd(),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function j(e,t){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)(a().mark((function e(t,r){var n,o,c,u,p,l,h,w,v,j,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.startsWith("0x")?s.base58.encode(b.from("1220".concat(t.slice(2)),"hex")):t,!y[n]){e.next=3;break}return e.abrupt("return",y[n]);case 3:return e.next=5,f()(d(n,r));case 5:if((o=e.sent).ok){e.next=8;break}throw Error("Fetch not working");case 8:return e.next=10,o.clone();case 10:return c=e.sent,e.prev=11,e.next=14,o.json();case 14:u=e.sent,p=i()(u.description),l=p.content,h=p.data,y[n]=O(O({},u),{},{ipfsHash:n,description:l},h),e.next=26;break;case 19:return e.prev=19,e.t0=e.catch(11),e.next=23,c.text();case 23:w=e.sent,v=i()(w),j=v.content,g=v.data,y[n]=O(O({},g),{},{ipfsHash:n,description:j});case 26:return e.abrupt("return",y[n]);case 27:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}},35878:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/governance/proposal",function(){return r(114)}])},33596:function(){}},function(e){e.O(0,[146,249,72,33,675,793,491,774,888,179],(function(){return t=35878,e(e.s=t);var t}));var t=e.O();_N_E=t}]);